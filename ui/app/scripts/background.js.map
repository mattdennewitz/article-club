{"version":3,"sources":["../scripts.babel/background.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,MAAM,CAAC,WAAW,GAAG,EAAE,CAAC;;AAExB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,UAAS,KAAK,EAAE,UAAU,EAAE,GAAG,EAAE;AAC/D,QAAG,GAAG,CAAC,MAAM,KAAK,UAAU,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;AACzD,eAAO;KACV;;AAED,KAAC,CAAC,IAAI,CAAC;AACH,WAAG,EAAE,8CAA8C;AACnD,cAAM,EAAE,KAAK;AACb,gBAAQ,EAAE,MAAM;AAChB,YAAI,EAAE;AACF,eAAG,EAAE,GAAG,CAAC,GAAG;AACZ,yBAAa,EAAE,CAAC;SACnB;KACJ,CAAC,CAAC,OAAO,CAAC,UAAS,QAAQ,EAAE;AAC1B,YAAI,KAAK,GAAG,EAAC,IAAI,EAAE,EAAE,EAAC,CAAC;;AAEvB,YAAG,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AAChC,iBAAK,CAAC,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;SAC3C;;AAED,cAAM,CAAC,aAAa,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;;AAEzC,cAAM,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC;AACrC,cAAM,CAAC,OAAO,CAAC,WAAW,CAAC,EAAC,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAC;KAClE,CAAC,CAAC;CACN,CAAC,CAAC;;AAEH,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,UAAS,KAAK,EAAE,QAAQ,EAAE;AAC1D,QAAI,UAAU,GAAG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;;AAE3C,QAAI,SAAS,GAAG,AAAC,CAAC,CAAC,UAAU,GAAI,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;;AAEvD,UAAM,CAAC,aAAa,CAAC,YAAY,CAAC,EAAC,IAAI,EAAE,SAAS,CAAC,QAAQ,EAAE,EAAC,CAAC,CAAC;AAChE,UAAM,CAAC,OAAO,CAAC,WAAW,CAAC,EAAC,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,UAAU,EAAC,CAAC,CAAC;CACpE,CAAC,CAAC","file":"background.js","sourcesContent":["'use strict';\n\nwindow.currentData = {};\n\nchrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {\n    if(tab.status !== 'complete' || !tab.url.startsWith('http')) {\n        return;\n    }\n\n    $.ajax({\n        url: 'http://localhost:8000/api/v1/bundles/search/',\n        method: 'GET',\n        dataType: 'json',\n        data: {\n            url: tab.url,\n            comfort_level: 0\n        }\n    }).success(function(response) {\n        var badge = {text: ''};\n\n        if(response && response.length > 0) {\n            badge.text = response.length.toString();\n        }\n\n        chrome.browserAction.setBadgeText(badge);\n\n        window.currentData[tabId] = response;\n        chrome.runtime.sendMessage({type: 'NEW_DATA', data: response});\n    });\n});\n\nchrome.tabs.onActivated.addListener(function(tabId, windowId) {\n    var dataForTab = window.currentData[tabId];\n\n    var badgeText = (!!dataForTab) ? dataForTab.length : 0;\n\n    chrome.browserAction.setBadgeText({text: badgeText.toString()});\n    chrome.runtime.sendMessage({type: 'NEW_DATA', data: dataForTab});\n});\n"]}